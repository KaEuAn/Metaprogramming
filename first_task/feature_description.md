# Идея системы

Наша система - бекэнд сайта для просмотра сериалов/фильмов, нацеленный во многом на то, 
что выпускается в реальном времени и на обсуждение пользователей под видео, комментарии по конкретному фильму/сериалу
(чтобы люди читали и выбирали, что посмотреть.)

## Авторизация, проверки

Начнём с очевидного паттерна, который нам здесь понадобиться — цепочка. Есть форум, на котором 
пользователь может писать, есть модераторы форумов, есть модераторы, которые добавляют новости про новые фильмы, 
есть модераторы, и т.д. Поэтому нужно удобно проверять кучу условий (например, мы хотим ответить от лица сайта
на комментарий, нужно проверить, что мы залогинены, что мы являемся модератором, что комментарий не удалён). 

Отдельно выделяется категория проверок на статус (роль) человека, в которой будут свои общие функции, поэтому выделим 
для них общий надкласс (меньше кода). (*в картинке не стал копировать переопределяющиеся методы*)

## Выдача страницы

Мы должны возвращать страницу, которая состоит из множества частей: меню, видео, комментарии, новости. При этом 
возвращаемое значение одно и то же — строка с html-кодом, но при этом должны быть разные конструкции сборки в зависимости
от типа сборки

Кажется, что для этого подходят паттерны строитель, шаблонный метод и . Строитель возвращает продукт только после выполнения 
всех шагов, а Абстрактная фабрика возвращает продукт сразу же, что тоже говорит, что у нас должен быть строитель.

Также нам нужно передавать параметры, которые будут различаться в зависимости от типа страницы. Заведём для
них отдельный интерфейс. Получается, что ближе всего к логике нашей сборки паттерн состояние (не стратегия, так как для каждого вида
страницы свой набор параметров и логичнее хранить состояния), потому что мы возвращаем не новый класс, а строку, 
при этом можем для шаблонного метода у нас разный тип параметров, который нам может приходить, поэтому стр

*Вместо строки там может стоять и отдельный класс, который потом и соберёт быстро страницу по полям, которые ему передали,
но я условно взял, что возвращаем строку. Есть несколько вариантов, выбрал этот*

## Видеоплееры

Есть условные контентмейкеры, которые выкладывают видео (озвучка, переводы), 
мы выкладываем их видео (к каждой серии есть несколько вариантов). Перекодировать и делать свой плеер не хотим, 
просто вставляем чужие плееры на сайт. Для этого нужно править вёрстку, сайты нескольких типов. В этом нам помогут 
два паттерна: шаблонный метод и адаптер. Они нужны для того, чтобы мы выполняли одинаковую инструкцию не повторяясь
(выравнивание плеера в html-коде, вставка в нужную область кода страницы), при этом имели бы некоторые шаги различными 
(тонкая настройка плеера с помощью его *API*, получение ссылки на плеер по внутреннему токену, если это наш партнер, 
например). А адаптер нужен, если нам условно дают плеер, версию которого мы не поддерживаем, если выдают не в том 
формате и нам нужно преобразовать в нужный для вставки.

## Итераторы

Хоть и очевидный пункт, но итераторы нам нужны. Например, для того же поиска нужного класса с информацией про видео 
по video_id. Класс нам нужен, потому что там будет достаточно много полей: жанр, множество доступных переводов/озвучек.
Можно это хранить в сорченой по video_id структуре, потому что это самый быстрый способ - оперативная память, а можно 
хранить в базе данных (если большой объём), тогда в данном случае итераторы не нужны, хотя проще завести несколько серверов 
с дампнутой базой, но это уже детали реализации.

Аналогично итераторы нужны для того, чтобы пробегать по user_id для публикации комментария, например, или просмотра профиля
пользователя.

## Информация о видео

Для каждого видео так же есть страница с описанием, поэтому если админы будут добавлять инфу в таблицу не по одному фильму,
то пригодится паттерн фабричный метод (потому что описание для фильма и сериала отличается, значит, нужен интерфейс создания и 
паттерн)

## Примечания
